# Circle Mappings for Holacracy Integration
# Links circle roles to CONSOLIDATED_ACTIONS.yaml items based on Purpose/Domains/Accountability

metadata:
  version: "1.0"
  created_at: "2025-11-30T23:18Z"
  purpose: "Map CONSOLIDATED_ACTIONS.yaml items to Holacracy circle owners for distributed authority"
  
circles:
  analyst:
    purpose: "Data quality foundation and risk analytics baseline"
    accountability: "Ensure metrics exist before WSJF/ROAM decisions"
    patterns:
      - ml-training-guardrail
      - depth-ladder
      - observability-first
    action_filters:
      - pattern: ml-training-guardrail
      - tags: [Analytics, Stats, ML]
      - phase: A
    assigned_actions:
      - PHASE-A-1  # Establish initial measurable baselines
      - PHASE-A-3  # Populate AgentDB with baseline data
      - PHASE-A-4  # Validate learning capture parity
      
  assessor:
    purpose: "BLOCKER remediation and dependency validation"
    accountability: "Unblock PHASE-B deliverables"
    patterns:
      - safe-degrade
      - guardrail-lock
      - governance-review
    action_filters:
      - priority: [critical, urgent]
      - status: [BLOCKER, NOW]
      - tags: [Dependencies, Health, Validation]
    assigned_actions:
      - PHASE-A-2  # Patch scripts to auto-create risk DB
      - PHASE-B-1  # Validate process governor health
      - PHASE-B-2  # BLOCKER remediation
      
  innovator:
    purpose: "Federation agents and governance automation"
    accountability: "Integrate retro coach + governance agent into production cycle"
    patterns:
      - federation-runtime
      - governance-review
      - retrospective-facilitation
    action_filters:
      - tags: [Federation, Automation, Innovation]
      - pattern: [governance-review, federation-runtime]
    assigned_actions:
      - PHASE-C-1  # Governance agent instrumentation
      - PHASE-C-2  # Retro coach integration
      - PHASE-C-3  # Federation runtime configuration
      
  intuitive:
    purpose: "Observability-first pattern implementation"
    accountability: "No failures without supporting metrics"
    patterns:
      - observability-first
      - visualization
      - sensemaking
    action_filters:
      - pattern: observability-first
      - tags: [Observability, Metrics, Dashboard]
    assigned_actions:
      - PHASE-D-1  # Observability gap detection
      - PHASE-D-2  # Dashboard enhancement
      - PHASE-D-3  # VS Code extension scaffold
      
  orchestrator:
    purpose: "Pattern metrics instrumentation and BML cycle health"
    accountability: "Close Build-Measure-Learn feedback loops"
    patterns:
      - circle-risk-focus
      - iteration-budget
      - cadence-ceremony
    action_filters:
      - tags: [BML, Cycles, Coordination]
      - pattern: [circle-risk-focus, iteration-budget]
    assigned_actions:
      - PHASE-B-3  # Pattern telemetry hardening
      - PHASE-B-4  # Full cycle validation
      - PHASE-E-1  # Circle coordination automation
      
  seeker:
    purpose: "Dependency automation and codebase health"
    accountability: "Keep dependencies current without manual toil"
    patterns:
      - dependency-automation
      - rust-first
      - safe-degrade
    action_filters:
      - tags: [Dependencies, Rust, Automation]
      - pattern: dependency-automation
    assigned_actions:
      - SEC-AUDIT-001  # Security & Secrets Audit
      - PHASE-E-2  # Dependency automation setup
      - PHASE-E-3  # Rust-first enhancements

# Mapping Rules
mapping_rules:
  priority_overrides:
    # Critical/urgent items go to Assessor regardless of pattern
    - condition: "priority in ['critical', 'urgent']"
      circle: assessor
      
  pattern_precedence:
    # Pattern-based routing takes precedence over tags
    - pattern: ml-training-guardrail
      circle: analyst
    - pattern: safe-degrade
      circle: assessor
    - pattern: federation-runtime
      circle: innovator
    - pattern: observability-first
      circle: intuitive
    - pattern: circle-risk-focus
      circle: orchestrator
    - pattern: dependency-automation
      circle: seeker
      
  cross_circle_collaboration:
    # Actions requiring multiple circles
    - action_id: SEC-AUDIT-001
      primary_circle: seeker
      collaborating_circles: [assessor, orchestrator]
      
    - action_id: PHASE-C-3
      primary_circle: innovator
      collaborating_circles: [orchestrator, intuitive]

# Distributed Authority Verification
authority_rules:
  # Define which circles have authority for which types of changes
  code_changes:
    analyst: [metrics, analytics, learning]
    assessor: [health, blockers, dependencies]
    innovator: [federation, governance, automation]
    intuitive: [observability, dashboards, visualization]
    orchestrator: [cycles, coordination, patterns]
    seeker: [dependencies, rust, security]
    
  configuration_changes:
    analyst: [agentdb, metrics_config]
    assessor: [governor_config, health_thresholds]
    innovator: [federation_config, agent_config]
    intuitive: [dashboard_config, metrics_display]
    orchestrator: [cycle_config, pattern_config]
    seeker: [package_json, cargo_toml, renovate_config]
    
  process_changes:
    analyst: [baseline_collection, calibration]
    assessor: [blocker_resolution, health_checks]
    innovator: [governance_process, retro_process]
    intuitive: [observability_process, gap_detection]
    orchestrator: [bml_cycles, circle_rotation]
    seeker: [dependency_updates, automation_setup]
